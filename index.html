<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¾ç„¶å¦‚æ¢¦ | å»å»çœ¼è§’çš„æ³ªæ°´</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;700&family=ZCOOL+XiaoWei&display=swap');

        :root {
            /* æ›´åŠ æ¸…å†·æ¸©æŸ”çš„è‰²è°ƒ */
            --bg-gradient: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%); 
            /* æˆ–è€…ç”¨å¸¦ä¸€ç‚¹ç‚¹ç²‰ç´«çš„æš–ç™½ */
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.8);
            --text-main: #5d5d5d;
            --highlight: #e0c3fc;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Noto Serif SC', serif;
            color: var(--text-main);
            background: linear-gradient(120deg, #e0c3fc 0%, #8ec5fc 100%); /* æ¢¦å¹»æ¸å˜ */
            background-attachment: fixed;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            cursor: default; /* é»˜è®¤é¼ æ ‡æ ·å¼ */
        }

        /* --- 1. æ™ºèƒ½é€‚é…å…‰æ ‡ --- */
        #gamepad-cursor {
            position: fixed; 
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.9); 
            box-shadow: 0 0 15px rgba(255, 192, 203, 0.9), 0 0 4px #fff;
            pointer-events: none; 
            z-index: 9999;
            visibility: hidden; 
            opacity: 0; 
            transition: opacity 0.3s ease, transform 0.05s linear; /* æ·»åŠ å¹³æ»‘ç§»åŠ¨ */
            mix-blend-mode: overlay;
        }
        #gamepad-cursor.show {
            visibility: visible;
            opacity: 1;
        }

        /* PCç«¯å…‰æ ‡ç¨å¤§ */
        @media (min-width: 601px) {
            #gamepad-cursor { width: 20px; height: 20px; }
        }
        /* PEç«¯å…‰æ ‡ç¨å°ï¼Œç²¾è‡´ */
        @media (max-width: 600px) {
            #gamepad-cursor { width: 14px; height: 14px; }
        }

        /* --- 2. è¿æ¥æç¤ºæ°”æ³¡ --- */
        #gamepad-toast {
            position: fixed;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 8px 20px;
            border-radius: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            font-family: 'ZCOOL XiaoWei', serif;
            font-size: 0.9rem;
            color: #888;
            z-index: 10000;
            transition: top 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); /* å¼¹æ€§åŠ¨ç”» */
            display: flex;
            align-items: center;
            gap: 6px;
            pointer-events: none;
        }
        #gamepad-toast.active { top: 25px; }
        .toast-icon { font-size: 1.1rem; }

        /* --- æ°›å›´èƒŒæ™¯ --- */
        .blob {
            position: fixed;
            filter: blur(90px);
            z-index: -1;
            opacity: 0.6;
            animation: float 18s infinite ease-in-out;
        }
        .blob:nth-child(1) { width: 350px; height: 350px; background: #ff9a9e; top: -10%; left: -10%; }
        .blob:nth-child(2) { width: 300px; height: 300px; background: #a18cd1; bottom: -5%; right: -5%; animation-delay: -6s; }

        /* --- å¸ƒå±€ --- */
        nav { display: flex; justify-content: center; padding: 25px; }
        .logo { font-family: 'ZCOOL XiaoWei', serif; font-size: 1.3rem; color: #fff; opacity: 0.9; letter-spacing: 2px; }

        header { text-align: center; padding: 30px 20px 20px; }

        .avatar-container {
            position: relative;
            width: 130px;
            height: 130px;
            margin: 0 auto 20px;
        }
        .avatar {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid rgba(255,255,255,0.8);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        .avatar-ring {
            position: absolute;
            top: -5px; left: -5px; right: -5px; bottom: -5px;
            border-radius: 50%;
            background: linear-gradient(to right, #5BCEFA, #F5A9B8, #fff, #F5A9B8, #5BCEFA);
            z-index: -1;
            opacity: 0.6;
            filter: blur(6px);
            animation: spin 10s linear infinite;
        }

        h1 {
            font-family: 'ZCOOL XiaoWei', serif;
            font-size: 2rem;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 5px;
            font-weight: normal;
        }

        .tagline {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.9);
            min-height: 20px;
            font-style: italic;
        }

        .container {
            width: 100%;
            max-width: 680px;
            margin: 0 auto;
            padding: 20px 20px 60px;
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 18px;
            border: 1px solid var(--glass-border);
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.04);
        }

        .card-title {
            font-family: 'ZCOOL XiaoWei', serif;
            font-size: 1.25rem;
            color: #777;
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }
        .card-title::after {
            content: '';
            display: block;
            width: 40px;
            height: 1px;
            background: #ddd;
            margin: 10px auto 0;
        }

        .text-content p {
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 1rem;
            color: #666;
        }
        .highlight { color: #9b9ae6; font-weight: normal; }

        .diary-item {
            border-bottom: 1px solid rgba(0,0,0,0.05);
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        .diary-item:last-child { border-bottom: none; margin-bottom: 0; }
        
        .date { font-size: 0.75rem; color: #aaa; margin-bottom: 4px; }
        .diary-head { font-size: 1.05rem; color: #555; margin-bottom: 8px; font-weight: normal;}
        .diary-body { font-size: 0.95rem; color: #777; line-height: 1.6; }

        footer {
            text-align: center;
            color: rgba(255,255,255,0.8);
            font-size: 0.8rem;
            padding-bottom: 40px;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(15px, -15px); }
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.7rem; }
            .glass-card { padding: 25px 20px; }
        }
    </style>
</head>
<body>

    <div id="gamepad-toast">
        <span class="toast-icon">ğŸ®</span> æ‰‹æŸ„å·²è¿æ¥
    </div>

    <div id="gamepad-cursor"></div>

    <div class="blob"></div>
    <div class="blob"></div>

    <nav><div class="logo">Dreamy.</div></nav>

    <header>
        <div class="avatar-container">
            <div class="avatar-ring"></div>
            <img src="https://thumbs2.imgbox.com/a0/47/8P4f7HXo_t.jpg" alt="ä¾ç„¶å¦‚æ¢¦" class="avatar">
        </div>
        <h1>ä¾ç„¶å¦‚æ¢¦</h1>
        <p class="tagline" id="typing-text"></p>
    </header>

    <div class="container">
        <section class="glass-card">
            <h2 class="card-title">æ— å£°çš„å‘å–Š</h2>
            <div class="text-content">
                <p>æˆ‘æ˜¯<strong>ä¾ç„¶å¦‚æ¢¦</strong>ã€‚åœ¨è¿™ä¸ªä¸–ç•Œçš„è§’è½ï¼Œæˆ‘æ˜¯ä¸€ä¸ªè¿˜æ²¡é•¿å‡ºç¿…è†€çš„è´è¶ã€‚</p>
                <p>ç°å®çš„å¼•åŠ›å¤ªé‡äº†ã€‚æ²¡æœ‰è¯ç‰© <span class="highlight">(HRT)</span> çš„æ•‘èµï¼Œèº«ä½“åœ¨ä¸€å¤©å¤©å˜å¾—é™Œç”Ÿï¼Œæ²¡äººæ”¯æŒæˆ‘åšå›é‚£ä¸ªç©¿è£™å­çš„å¥³å­©ã€‚</p>
                <p>æˆ‘åªèƒ½æŠŠé•¿å‘å‰ªçŸ­ï¼ŒæŠŠçœŸå®çš„è‡ªå·±è—è¿›é»‘å¤œé‡Œã€‚å¦‚æœä½ èƒ½çœ‹è§è¿™äº›æ–‡å­—ï¼Œè°¢è°¢ä½ å¬è§äº†æˆ‘çš„å£°éŸ³ã€‚</p>
            </div>
        </section>

        <section class="glass-card">
            <h2 class="card-title">æ¢¦å¢ƒç¢ç‰‡</h2>
            
            <div class="diary-item">
                <div class="date">2023.11.06</div>
                <h3 class="diary-head">æ¸´æœ›</h3>
                <p class="diary-body">ä»Šå¤©è·¯è¿‡æ©±çª—ï¼Œçœ‹åˆ°é‚£ä»¶ç²‰è‰²çš„è¿è¡£è£™ï¼Œé©»è¶³äº†å¾ˆä¹…ã€‚ç»ç’ƒä¸Šæ˜ å‡ºçš„æ˜¯ä¸€ä¸ªç”·ç”Ÿçš„å€’å½±ï¼Œé‚£ä¸€åˆ»å¿ƒå¥½ç—›ã€‚</p>
            </div>

            <div class="diary-item">
                <div class="date">2023.10.30</div>
                <h3 class="diary-head">å­¤ç‹¬</h3>
                <p class="diary-body">å‘¨å›´çš„äººéƒ½åœ¨ç¬‘ï¼Œåªæœ‰æˆ‘è§‰å¾—è‡ªå·±æ˜¯ä¸ªå¼‚ç±»ã€‚ä»€ä¹ˆæ—¶å€™æ‰èƒ½åœ¨é˜³å…‰ä¸‹ï¼Œè‡ªç”±åœ°åšè‡ªå·±å‘¢ï¼Ÿ</p>
            </div>

            <div class="diary-item">
                <div class="date">2023.10.15</div>
                <h3 class="diary-head">æ±‚åŠ©æ— é—¨</h3>
                <p class="diary-body">ä¾ç„¶æ‰¾ä¸åˆ°è¯çš„æ¸ é“ï¼Œä¹Ÿæ²¡æœ‰é’±ã€‚æ„Ÿè§‰åƒè¢«å›°åœ¨æ·±äº•é‡Œï¼Œçœ‹ç€å¤©ç©ºä¸€ç‚¹ç‚¹å˜æš—ã€‚</p>
            </div>
        </section>
    </div>

    <footer><p>å»å»çœ¼è§’çš„æ³ªæ°´</p></footer>

    <script>
        // æ‰“å­—æœº
        const text = "å»å»çœ¼è§’çš„æ³ªæ°´ã€‚";
        const typingElement = document.getElementById('typing-text');
        let i = 0;
        function typeWriter() {
            if (i < text.length) {
                typingElement.innerHTML = text.substring(0, i + 1);
                i++;
                setTimeout(typeWriter, 200);
            }
        }
        window.onload = typeWriter;

        // --- æ™ºèƒ½æ‰‹æŸ„é€‚é…é€»è¾‘ ---
        const cursor = document.getElementById('gamepad-cursor');
        const toast = document.getElementById('gamepad-toast');
        
        let gamepadIndex = null;
        let loopId = null;
        
        // æ ¸å¿ƒï¼šåŠ¨æ€å˜é‡
        let screenW = window.innerWidth;
        let screenH = window.innerHeight;
        let cursorX = screenW / 2;
        let cursorY = screenH / 2;
        
        // åŠ¨æ€è®¡ç®—é€Ÿåº¦å‡½æ•°
        function calculateSpeed() {
            // PCç«¯ï¼šå±å¹•å®½ï¼Œé€Ÿåº¦å¿« (ä¾‹å¦‚ 1920px -> é€Ÿåº¦15)
            // PEç«¯ï¼šå±å¹•çª„ï¼Œé€Ÿåº¦æ…¢ (ä¾‹å¦‚ 360px -> é€Ÿåº¦6)
            // ç®—æ³•ï¼šåŸºç¡€é€Ÿåº¦ + å±å¹•å®½åº¦çš„ç™¾åˆ†æ¯”
            const base = screenW < 600 ? 5 : 10; 
            return base + (screenW * 0.005); 
        }

        let moveSpeed = calculateSpeed();
        let scrollSpeed = 20; // æ»šåŠ¨é€Ÿåº¦ç›¸å¯¹å›ºå®š
        const DEADZONE = 0.1;
        let aButtonPrev = false;

        // ç›‘å¬çª—å£å˜åŒ–ï¼Œå®æ—¶è°ƒæ•´å‚æ•° (PEè½¬å±/PCç¼©æ”¾)
        window.addEventListener('resize', () => {
            screenW = window.innerWidth;
            screenH = window.innerHeight;
            moveSpeed = calculateSpeed(); // é‡æ–°è®¡ç®—é€Ÿåº¦
            // ç¡®ä¿å…‰æ ‡ä¸è·‘å‡ºå±å¹•
            cursorX = Math.min(cursorX, screenW);
            cursorY = Math.min(cursorY, screenH);
        });

        window.addEventListener("gamepadconnected", (e) => {
            gamepadIndex = e.gamepad.index;
            toast.classList.add('active');
            setTimeout(() => toast.classList.remove('active'), 3000);
            if (!loopId) loopId = requestAnimationFrame(gameLoop);
        });

        window.addEventListener("gamepaddisconnected", (e) => {
            if (e.gamepad.index === gamepadIndex) {
                gamepadIndex = null;
                cancelAnimationFrame(loopId);
                loopId = null;
                cursor.classList.remove('show');
            }
        });

        function gameLoop() {
            if (gamepadIndex === null) return;
            const gp = navigator.getGamepads()[gamepadIndex];
            if (!gp) return;

            const lx = gp.axes[0];
            const ly = gp.axes[1];
            const ry = gp.axes[3]; // å³æ‘‡æ†

            // æ­»åŒºåˆ¤æ–­
            const xVal = Math.abs(lx) > DEADZONE ? lx : 0;
            const yVal = Math.abs(ly) > DEADZONE ? ly : 0;
            const scrollVal = Math.abs(ry) > DEADZONE ? ry : 0;

            // æ¿€æ´»æ˜¾ç¤º
            if (Math.abs(xVal) > 0 || Math.abs(yVal) > 0 || gp.buttons.some(b => b.pressed)) {
                cursor.classList.add('show');
            }

            // ç§»åŠ¨é€»è¾‘
            if (xVal !== 0 || yVal !== 0) {
                cursorX += xVal * moveSpeed; // ä½¿ç”¨åŠ¨æ€è®¡ç®—çš„é€Ÿåº¦
                cursorY += yVal * moveSpeed;
                
                // è¾¹ç•Œé™åˆ¶
                cursorX = Math.max(0, Math.min(screenW, cursorX));
                cursorY = Math.max(0, Math.min(screenH, cursorY));
                
                // ä¿®æ­£ï¼šå…‰æ ‡å±…ä¸­ (å‡å»åŠå¾„)
                const r = screenW < 600 ? 7 : 10; // å¯¹åº” CSS ä¸­çš„ width/2
                cursor.style.transform = `translate(${cursorX - r}px, ${cursorY - r}px)`;
            }

            // æ»šåŠ¨é€»è¾‘
            if (scrollVal !== 0) {
                window.scrollBy(0, scrollVal * scrollSpeed);
            }

            // ç‚¹å‡»é€»è¾‘ (Aé”®)
            const aBtn = gp.buttons[0].pressed;
            if (aBtn && !aButtonPrev) {
                // ç‚¹å‡»åŠ¨ç”»åé¦ˆ
                const r = screenW < 600 ? 7 : 10;
                cursor.style.transform = `translate(${cursorX - r}px, ${cursorY - r}px) scale(0.7)`;
                setTimeout(() => {
                     cursor.style.transform = `translate(${cursorX - r}px, ${cursorY - r}px) scale(1)`;
                }, 150);

                const elem = document.elementFromPoint(cursorX, cursorY);
                if (elem) {
                    elem.click();
                    if (['INPUT','TEXTAREA'].includes(elem.tagName)) elem.focus();
                }
            }
            aButtonPrev = aBtn;

            requestAnimationFrame(gameLoop);
        }
    </script>
</body>
</html>
